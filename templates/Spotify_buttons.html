<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="UTF-8"> 
    <meta http-equiv="X-UA-Compatible" content="IE=edge"> <!-- # This is just to make sure that the website is responsive to the device that it is on. -->
    <meta content="width=device-width, initial-scale=1.0" name="viewport"> <!-- # This is just to make sure that the website is responsive to the device that it is on. -->

    <title>Spotify Buttons!</title>  <!-- # So title is just what is going to show up on the tab -->
    <link rel="stylesheet" href="styleMain.css"> <!-- This is the CSS file that defines our style -->

</head>

<h1>Enter Your Spotify Credentials</h1>

<!-- Form to collect Spotify credentials -->
<form id="spotify-form" action="/submit_credentials" method="POST"> <!-- Sends the credentials using the /submit_credentials post method going to app.py which receives with this @app route --> 
    <label for="client_id">Client ID:</label><br>
    <input type="text" id="client_id" name="client_id" required><br><br>

    <label for="client_secret">Client Secret:</label><br>
    <input type="text" id="client_secret" name="client_secret" required><br><br>

    <input type="submit" value="Submit">
</form>
 
<body>
    <!-- <p></p> -->
    <br><br>
    <button onclick="window.location.href='https://seamusmcn-github-io.onrender.com/pull_text'">Get Read me</button>
    <br><br>

    <p id="status"></p>  <!-- This will show the status of the request -->

    <h1>Add the next 5 most similar songs from what catalog? (Either 'Liked' or 'Master'!)</h1>

    <!-- Form to select Catalog Type -->
    <form id="spotify-form" onsubmit="return getMostSimilarSong()">
        <label for="Catalog">Catalog Type:</label><br>
        <input type="text" id="Catalog" name="Catalog" required><br><br>
        <input type="submit" value="Submit">
    </form>

    <script>
        function getMostSimilarSong() {
            // Prevent the form from submitting normally
            event.preventDefault();

            // Get the catalog type from the input field
            let catalog = document.getElementById('Catalog').value;

            // Make an AJAX request to the Flask route
            fetch('https://smcn-github-io.onrender.com/most_similar_song', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: new URLSearchParams({
                    'Catalog': catalog
                })
            })
            .then(response => response.text())
            .then(data => {
                // Display the response in the 'status' paragraph
                document.getElementById('status').innerText = data;
            })
            .catch(error => {
                document.getElementById('status').innerText = 'Error occurred!';
                console.error('Error:', error);
            });

            return false; // Prevent form submission from reloading the page
        }
    </script>  
    

</body>

</html>
